#!/usr/bin/env python3
import readline
import re

def handle_function_assignment(left_side, right_side, functions):
    func_name = left_side[:left_side.index('(')].strip()
    param = left_side[left_side.index('(') + 1:left_side.index(')')].strip()
    
    functions[func_name.lower()] = (param, right_side)
    return right_side

def handle_assignment(user_input, variables, functions):
    parts = user_input.split('=', 1)
    left_side = parts[0].strip()
    right_side = parts[1].strip()
    
    if '(' in left_side and ')' in left_side:
        return handle_function_assignment(left_side, right_side, functions)
    
def process_input(user_input, variables, functions):
    if '=' in user_input:
        return handle_assignment(user_input, variables, functions)
    
def main():
    variables = {}
    functions = {}
    
    print("Computor v2 - Your homemade basic calculator")
    print("Type 'exit' to quit")
    
    while True:
        try:
            user_input = input("> ").strip()
            if user_input.lower() == 'exit':
                break

            if not user_input:
                continue

            result = process_input(user_input, variables, functions)
            print('functions:', functions)
            
            if result is not None:
                print(result)
                
        except (KeyboardInterrupt, EOFError):
            print("\nGoodbye!")
            break
        except Exception as e:
            print(f"Error: {e}")

if __name__ == "__main__":
    main()
